{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":""},{"location":"#purpose","title":"Purpose","text":"<p>Apart from our Mail-IT-Wize web application, we also offer a RESTful API which provides endpoints for processing, printing documents and envelopes, and finally sending the document to your recipient. The API also has options in place for handling return mail.</p> <p>Our API can be divided into 2 large components: sending documents along with metadata (Intake request) and consulting previously sent documents (Resource request).</p>"},{"location":"#authentication-and-security","title":"Authentication and security","text":"<p>All HTTP requests and responses use SSL. Any API requests sent over unencrypted HTTP will not be honoured. These requests will not receive any response, and will time out. For authentication, we use an implementation of OAuth2.</p>"},{"location":"#managing-access-tokens","title":"Managing access tokens","text":"<p>Access tokens are managed by the users, via the API's web portal. These tokens always have a lifetime of 365 days, and are linked to one specific user.</p> <p>Upon expiration, the API will return an \"Unauthenticated\" error upon subsequent requests with said token.</p> <p>An implementation for refreshing tokens/retrieving a new access token via the API itself is under construction.</p>"},{"location":"#components","title":"Components","text":""},{"location":"#intake-request","title":"Intake request","text":"<p>Contains the main document, background (optional), envelope (optional), attachments (optional) together with all required metadata (address, recipient, document name, ...)</p> <p>Important: each intake request contains exactly 1 main document and 1 recipient. Bulk sending in a single request is currently not supported.</p>"},{"location":"#resource-request","title":"Resource request","text":"<p>A resource request can be used to consult previously sent Intake requests.</p>"},{"location":"#api-base-url-and-versioning","title":"API base URL and versioning","text":"<p>There is currently a single version available for the API in both UAT and PROD. This is v1.</p> <p>If a new version is introduced, the previous one will remain active for backwards compatibility. All API users will be notified of new releases.</p> <p>Base URL for PROD: <code>https://api.mailitwize.be/api/v1</code></p> <p>Base URL for UAT: <code>https://api-test.mailitwize.be/api/v1</code></p>"},{"location":"#technical-specification","title":"Technical specification","text":"<p>These docs serve as a general introduction and manual for usage of the API. </p> <p>For more detailed specs on all available API functionality, we suggest also taking a look at our Swagger.</p>"},{"location":"estimate_json/","title":"JSON Estimate request","text":""},{"location":"estimate_json/#endpoint-and-method","title":"Endpoint and method","text":"API version v1 Endpoint <code>base_url/api_version/intake/estimate</code> Method <code>POST</code>"},{"location":"estimate_json/#request-header","title":"Request header","text":"Header Value Accept <code>application/json</code> Authorization <code>Bearer [token]</code>"},{"location":"estimate_json/#request-body-and-document-format","title":"Request body and document format","text":"<p>The request body and format for an Estimate request are the exact same as the JSON Intake Request. </p> <p>Please refer to the JSON Intake documentation.</p>"},{"location":"estimate_multipart/","title":"Multipart Estimate request","text":""},{"location":"estimate_multipart/#endpoint-and-method","title":"Endpoint and method","text":"API version v1 Endpoint <code>base_url/api_version/intake/estimate/multipart</code> Method <code>POST</code>"},{"location":"estimate_multipart/#request-header","title":"Request header","text":"Header Value Accept <code>application/json</code> Authorization <code>Bearer [token]</code>"},{"location":"estimate_multipart/#request-body-and-document-format","title":"Request body and document format","text":"<p>The request body and format for an Estimate request are the exact same as the Multipart Intake Request.</p> <p>Please refer to the Multipart Intake documentation.</p>"},{"location":"intake_bulk/","title":"Bulk Intake Request","text":"<p>Warning</p> <p>This API endpoint is still in development, and only available on our UAT environment.</p> <p>As such, this documentation is subject to change in the final version.</p>"},{"location":"intake_bulk/#endpoint-and-method","title":"Endpoint and method","text":"API version v1 Endpoint <code>base_url/api_version/intake/bulk</code> Method <code>POST</code>"},{"location":"intake_bulk/#request-header","title":"Request header","text":"Header Value Accept <code>application/json</code> Authorization <code>Bearer [token]</code>"},{"location":"intake_bulk/#multipart-form-data-structure","title":"Multipart form-data Structure","text":"<pre><code>document[name] =&gt; 'string',\ndocument[mime-type] =&gt; 'mime-type',\ndocument[contents] =&gt; file,\ndocument[multiplex] =&gt; boolean (default 1),\n\naddress[coordinates][startX] =&gt; integer,\naddress[coordinates][startY] =&gt; integer,\naddress[coordinates][width] =&gt; integer,\naddress[coordinates][height] =&gt; integer,\n\nsplitString[coordinates][startX] =&gt; integer,\nsplitString[coordinates][startY] =&gt; integer,\nsplitString[coordinates][width] =&gt; integer,\nsplitString[coordinates][height] =&gt; integer,\nsplitString[text] =&gt; string,\n\nattachments[0][name] =&gt; 'string',\nattachments[0][mime-type] =&gt; 'mime-type',\nattachments[0][contents] =&gt; file,\n\nattachments[1][name] =&gt; ...,\n\nbackground[name] =&gt; 'string',\nbackground[mime-type] =&gt; 'mime-type',\nbackground[contents] =&gt; file,\n\nenvelope[name] =&gt; 'string',\nenvelope[mime-type] =&gt; 'mime-type',\nenvelope[contents] =&gt; file,\n\npostalService[registered] =&gt; boolean,\npostalService[prior] =&gt; boolean,\npostalService[nonPrior] =&gt; boolean,\n\ncorrelation[costId] =&gt; 'string,optional',\ncorrelation[lang] =&gt; 'required, nl,en or fr',\ncorrelation[returnAddress] =&gt; 'optional string, single line return address',\n</code></pre>"},{"location":"intake_bulk/#multipart-form-data-values","title":"Multipart Form Data Values","text":""},{"location":"intake_bulk/#document-required","title":"Document (required)","text":"<p>Each Bulk Intake request must contain exactly one main document. The document is a PDF file that contains 1 or more recipients.</p> Key Description Required Type Default document[name] Name of the original document, including extension YES string document[mime-type] MIME type of the document. Currently only \"application/pdf\" is accepted YES string document[contents] Document PDF file YES file/binary document[multiplex] Print setting of the document. 0 = recto, 1 = recto/verso NO boolean 1"},{"location":"intake_bulk/#address-required","title":"Address (required)","text":"<p>Each Bulk Intake request must contain exactly one address location. Coordinates must be specified in points (pts). An address must be present on each page that designates a new recipient, along with a split string (see below).</p> Key Description Required Type Default address[coordinates][startX] Horizontal starting point of the address box YES integer address[coordinates][startY] Vertical starting point of the address box YES integer address[coordinates][width] Width of the address box YES integer address[coordinates][height] Height of the address box YES integer"},{"location":"intake_bulk/#split-string-required","title":"Split string (required)","text":"<p>Each Bulk Intake request must contain exactly one split string location and text. Coordinates must be specified in points (pts). The text in splitString[text] must appear once, on each page that designates a new recipient.</p> Key Description Required Type Default splitString[coordinates][startX] Horizontal starting point of the split string location YES integer splitString[coordinates][startY] Vertical starting point of the split string location YES integer splitString[coordinates][width] Width of the split string location YES integer splitString[coordinates][height] Height of the split string location YES integer splitString[text] The unique text per recipient to split the PDF document on"},{"location":"intake_bulk/#attachments-optional","title":"Attachments (optional)","text":"<p>Each Bulk Intake request may contain multiple attachments, using a consecutive numerical index (see JSON structure).</p> Key Description Required Type Default attachments[n][name] Name of the attachment YES, if using attachment string attachments[n][mime-type] MIME type of the attachment. Currently only \"application/pdf\" is accepted YES string attachments[n][contents] Attachment PDF file YES file/binary attachments[n][multiplex] Print setting of the attachment. 0 = recto, 1 = recto/verso NO boolean 1"},{"location":"intake_bulk/#background-optional","title":"Background (optional)","text":"<p>Each Bulk Intake request may contain exactly one background. The background will only be printed on the first page of the main document.</p> Key Description Required Type Default background[name] Name of the background YES, if using background string background[mime-type] MIME type of the background. Currently only \"application/pdf\" is accepted YES string background[contents] Background PDF file YES file/binary"},{"location":"intake_bulk/#envelope-optional","title":"Envelope (optional)","text":"<p>Each Bulk Intake request may contain exactly one envelope.</p> Key Description Required Type Default envelope[name] Name of the envelope YES, if using envelope string envelope[mime-type] MIME type of the envelope. Currently only \"application/pdf\" is accepted YES string envelope[contents] Envelope PDF file YES file/binary"},{"location":"intake_bulk/#carrier-optional-for-c4-envelopes","title":"Carrier (optional) for C4 envelopes","text":"<p>Each Bulk Intake request may contain exactly one carrier. An address carrier is only used when sending C4 envelopes, which use a separate sheet of paper to print the address on.</p> Key Description Required Type Default carrier[name] Name of the address carrier YES, if using carrier string carrier[mime-type] MIME type of the carrier. Currently only \"application/pdf\" is accepted YES string carrier[contents] Address carrier PDF file YES file/binary"},{"location":"intake_bulk/#correlation-required","title":"Correlation (required)","text":"<p>Each Bulk Intake request may contain additional </p> Key Description Required Type Default correlation[costId] Cost ID, for internal reference NO string correlation[lang] Document's language, must be one of nl, fr, en, de YES string correlation[returnAddress] Return address in case of undeliverable mail NO string Symeta Hybrid, Interleuvenlaan 50, 3001 Leuven"},{"location":"intake_bulk/#postal-service","title":"Postal service","text":"<p>Each Bulk Intake request may contain additional postal service instructions</p> Key Description Required Type Default postalService[registered] Registered shipment with tracking (bpost) NO boolean 0 postalService[prior] Prior shipment NO boolean 0 postalService[nonPrior] Non-prior (standard) shipment NO boolean 1"},{"location":"intake_bulk/#hook-required","title":"Hook (required)","text":"<p>Each Bulk Intake request must specify a webhook URL and method to send status  updates and possible address validation errors to</p> Key Description Required Type Default hook[uri] URI where the webhook should be sent to YES, if webhook is desired string hook[method] HTTP method to be used for the webhook, must be either GET or POST YES, if webhook is desired string <p>For more detailed information on the webhook functionality, refer to the Webhooks page.</p>"},{"location":"intake_bulk/#multipart-intake-request-response","title":"Multipart Intake Request Response","text":""},{"location":"intake_bulk/#success","title":"Success","text":"<p>A successful request will receive the following JSON response (with an HTTP 200 status code):</p> <p><pre><code>{\n    \"bulk_intake_id\": 145,\n    \"status\": \"received\"\n}\n</code></pre> This indicates the request was well-formed. The file will then be further processed, and updates will be sent via webhooks.</p>"},{"location":"intake_bulk/#webhooks","title":"Webhooks","text":""},{"location":"intake_bulk/#document-split-result","title":"Document split result","text":"<p>After a bulk PDF document has been split successfully, we will send back a webhook detailing how many recipients were parsed, and on which pages they were found.</p> <p>The cost of the entire bulk will also be included, in a <code>float</code> data type.</p> <pre><code>{\n  \"bulk_intake_id\": 145,\n  \"cost\": \"5.000\",\n  \"created_intakes\": [\n    {\n      \"intake_id\": 1948,\n      \"first_page\": \"1\",\n      \"last_page\": \"2\"\n    }\n  ],\n  \"total_recipients\": 1\n}\n</code></pre>"},{"location":"intake_bulk/#address-validation-errors","title":"Address validation errors","text":"<p>If any of the parsed addresses in a bulk intake fail validation, these will be sent in a bundled webhook. This webhook will contain the following:</p> <p><pre><code>{\n  \"bulk_intake_id\": 145,\n  \"status\": \"rejected\",\n  \"data\": [\n    {\n      \"first_page\": 2,\n      \"last_page\": 2,\n      \"errors\": [\n        \"houses\"\n      ],\n      \"parsed_text\": \"Kerkstraat 10\\n9800 Deinze\"\n    },\n    {\n      \"first_page\": 3,\n      \"last_page\": 3,\n      \"errors\": [\n        \"roads\",\n        \"postcode\",\n        \"road\"\n      ],\n      \"parsed_text\": \"John Doe\\n Deinze\"\n    },\n    {\n      \"first_page\": 4,\n      \"last_page\": 4,\n      \"errors\": [\n        \"city\",\n        \"postcode\"\n      ],\n      \"parsed_text\": \"John Doe\\nKerkstraat 25\"\n    }\n  ],\n  \"type\": \"address_validation_errors\"\n}\n</code></pre> In the <code>data</code> property, we will find all the addresses that failed. The webhook will always include which component of the address caused the failure. <code>parsedText</code> will always contain the raw text that was parsed on the document.</p> <p>Note: for documents that fail address validation, we will not persist the Intake model to the database. These are only kept in memory at runtime to provide feedback.</p>"},{"location":"intake_bulk/#possible-error-codes","title":"Possible error codes","text":"HTTP code Description Reason 422 Unprocessable Entity Request is invalid - either missing or incorrectly formatted parameters.Refer to validation errors for specifics. 413 Entity Too Large Request size exceeds limit 401 Unauthorized Access token is not valid or expired - refer to the web portal"},{"location":"intake_bulk/#possible-error-webhooks","title":"Possible error webhooks","text":""},{"location":"intake_bulk/#pdf-document-is-not-readable","title":"PDF document is not readable","text":"<p>If the transferred PDF document cannot be read, this error will be returned via webhook.</p> <p>This can occur if the PDF file has been flattened/rasterized, or if the file format has been corrupted.</p>"},{"location":"intake_bulk/#amount-of-split-documents-does-not-match-count_recipients","title":"Amount of split documents does not match count_recipients","text":"<p>If the indicated expected amount of recipients does not match the amount of documents we have after splitting using the identifier, this error will be returned via webhook.</p> <pre><code>{\n    \"status\": \"error\",\n    \"data\": {\n        \"count_recipients\": 2,\n        \"split_count\": 6\n    },\n    \"code\": \"indicatedCountNotEqualsSplitCount\",\n    \"error_message\": \"Indicated number of recipients does not match the number of intakes. This usually indicates an issue with the splitting identifier.\"\n}\n</code></pre>"},{"location":"intake_delete/","title":"Intake delete request","text":""},{"location":"intake_delete/#endpoint-and-method","title":"Endpoint and method","text":"API version v1 Endpoint <code>base_url/api_version/intake/delete/{id}?confirmation={hash}</code> Method <code>POST</code> <p><code>{id}</code> is the numeric ID of the Intake to be deleted.</p> <p><code>{hash}</code> should be replaced by an MD5 hash of the zip code of the Intake to be deleted.</p> <p>Example</p> <p>For zip code 9000, this would result in the following URL:</p> <p><code>https://api.mailitwize.be/api/v1/intake/delete/1450?confirmation=d5ab8dc7ef67ca92e41d730982c5c602</code></p>"},{"location":"intake_delete/#request-header","title":"Request header","text":"Header Value Accept <code>application/json</code> Authorization <code>Bearer [token]</code>"},{"location":"intake_delete/#json-response","title":"JSON response","text":"<p>If the file is successfully deleted, the API will return the following response, along with an HTTP 200 status code: <pre><code>{\n  \"success\": true,\n  \"message\": \"Intake with ID {id} was deleted and will not be printed.\"\n}\n</code></pre></p>"},{"location":"intake_delete/#possible-errors","title":"Possible errors","text":"HTTP code Description Reason 422 Unprocessable Entity Request could not be fulfilled.Refer to error message for specifics. 401 Unauthorized Access token is not valid or expired - refer to the web portal 400 Bad Request Confirmation hash does not match"},{"location":"intake_json/","title":"JSON Intake request","text":""},{"location":"intake_json/#endpoint-and-method","title":"Endpoint and method","text":"API version v1 Endpoint <code>base_url/api_version/intake</code> Method <code>POST</code>"},{"location":"intake_json/#request-header","title":"Request header","text":"Header Value Accept <code>application/json</code> Authorization <code>Bearer [token]</code>"},{"location":"intake_json/#request-body-and-document-format","title":"Request body and document format","text":"<p>All metadata and documents must be sent in a JSON format. PDF content must be sent in a base-64 encoded string.</p> <p>Examples for achieving the correct format:</p> <p>Example</p> <p>Warning</p> <p>The maximum size of a JSON request is 4MB! If your payload exceeds this limit,  the server will return an HTTP error 413 (entity/payload too large). If you want to send larger documents, use the Multipart Intake request.</p>"},{"location":"intake_json/#php","title":"PHP","text":"<pre><code>&lt;?php\n$doc = base64_encode(file_get_contents(\u2018document.pdf\u2019));\n</code></pre>"},{"location":"intake_json/#c","title":"C#","text":"<pre><code>String GetBase64FileContent(string fileName, string path)\n{\n    var file = Directory.GetFiles(path, $\"{fileName}.*\").FirstOrDefault();\n    if (file != null) {\n        Byte[] bytes = File.ReadAllBytes(file);\n        String base64String = Convert.ToBase64String(bytes);\n        return base64String;\n    }\n\n    return null;\n}\n</code></pre>"},{"location":"intake_json/#json-request-structure","title":"JSON Request Structure","text":"<pre><code>{\n    \"document\": {\n        \"name\": \"string\",\n        \"mime-type\": \"mime-type\",\n        \"contents\": \"base64encoded document content\",\n        \"multiplex\": boolean (default 1),\n    },\n    \"attachments\": {\n        \"0\": {\n            \"name\" : \"string\",\n            \"mime-type\": \"mime-type\",\n            \"contents\": \"base64encoded content\",\n        },\n        \"1\": {\n            ...\n        }\n    },  \n    \"background\" : {\n        \"name\": \"string\",\n        \"mime-type\": \"mime-type\",\n        \"contents\": \"base64encoded content\"\n    },\n    \"envelope\": {\n        \"name\": \"string\",\n        \"mime-type\": \"mime-type\",\n        \"contents\": \"base64encoded content\"\n    },\n    \"carrier\": {\n        \"name\": \"string\",\n        \"mime-type\": \"mime-type\",\n        \"contents\": \"base64encoded content\"\n    }\n    \"address\": {\n        \"firstname\": \"string\",\n        \"lastname\": \"string\",\n        \"fullname\": \"string\",\n        \"street\": \"string\",\n        \"houseNumber\": integer,\n        \"houseNumberAlpha\": \"string\",\n        \"box\": \"string\"\n        \"unstructuredStreetNumberBox\": \"string\",\n        \"zip\": \"string\",\n        \"municipality\": \"string\",\n        \"countryIso2\": \"string two letters\",\n        \"company\": \"string\"\n    },\n    \"correlation\": {\n        \"costId\": \"optional,string\",\n        \"lang\": \"string nl,fr,en,de\",\n        \"returnAddress\": \"string, single line address\"\n    },\n    \"postalService\": {\n        \"registered\": boolean default 0,\n        \"prior\": boolean default 0,\n        \"nonPrior\": boolean default 0,\n    },\n    \"email\": {\n        \"registered\": boolean default 0,\n        \"email\": \"string email\"\n    },\n    \"hook\": {\n        \"uri\": \"Full webhook path\",\n        \"method\": \"POST or GET\"\n    }\n}\n</code></pre>"},{"location":"intake_json/#json-request-values","title":"JSON Request Values","text":""},{"location":"intake_json/#document-required","title":"Document (required)","text":"<p>Each Intake request must contain exactly one main document.</p> Key Description Required Type Default document.name Name of the document YES string document.mime-type MIME type of the document. Currently only \"application/pdf\" is accepted YES string document.contents Base64-encoded contents of the document YES string document.multiplex Print setting of the document. 0 = recto, 1 = recto/verso NO boolean 1"},{"location":"intake_json/#attachments-optional","title":"Attachments (optional)","text":"<p>Each Intake request may contain multiple attachments, using a consecutive numerical index (see JSON structure).</p> Key Description Required Type Default attachments.{n}.name Name of the attachment YES, if using attachment string attachments.{n}.mime-type MIME type of the attachment. Currently only \"application/pdf\" is accepted YES string attachments.{n}.contents Base64-encoded contents of the attachment YES string attachments.{n}.multiplex Print setting of the attachment. 0 = recto, 1 = recto/verso NO boolean 1"},{"location":"intake_json/#background-optional","title":"Background (optional)","text":"<p>Each Intake request may contain exactly 1 background. The background will only be printed on the first page of the main document.</p> Key Description Required Type Default background.name Name of the background YES, if using background string background.mime-type MIME type of the background. Currently only \"application/pdf\" is accepted YES string background.contents Base64-encoded contents of the background YES string"},{"location":"intake_json/#envelope-optional","title":"Envelope (optional)","text":"<p>Each Intake request may contain exactly one envelope.</p> Key Description Required Type Default envelope.name Name of the envelope YES, if using envelope string envelope.mime-type MIME type of the envelope. Currently only \"application/pdf\" is accepted YES string envelope.contents Base64-encoded contents of the envelope YES string"},{"location":"intake_json/#carrier-optional-for-c4-envelopes","title":"Carrier (optional) for C4 envelopes","text":"<p>Each Intake request may contain exactly one carrier. An address carrier is only used when sending C4 envelopes, which use a separate sheet of paper to print the address on.</p> Key Description Required Type Default carrier.name Name of the address carrier YES, if using carrier string carrier.mime-type MIME type of the carrier. Currently only \"application/pdf\" is accepted YES string carrier.contents Base64-encoded contents of the carrier YES string"},{"location":"intake_json/#address-required","title":"Address (required)","text":"<p>Each Intake request must contain exactly one recipient with the required address parts.</p> Key Description Required Type Default address.firstname Recipient's first name YES, if address.fullname and address.company absent string address.lastname Recipient's last name YES, if address.fullname and address.company absent string address.fullname Recipient's full name YES, if address.firstname, address.lastname and address.company absent string address.company Company name YES, if address.firstname, address.lastname and address.fullname absent string address.street Street name without number YES, if address.unstructuredStreetNumberBox absent string address.houseNumber House number YES, if address.unstructuredStreetNumberBox absent string address.houseNumberAlpha House number alphanumeric, will be placed after houseNumber on envelope NO string address.box Box number NO string address.unstructuredStreetNumberBox Unstructured street, house number and box YES, if address.street and address.houseNumber absent string address.zip Zip code YES string address.municipality Municipality YES string address.countryIso2 Country code, ISO 3611-2 format (2 characters) YES string"},{"location":"intake_json/#correlation-required","title":"Correlation (required)","text":"Key Description Required Type Default correlation.costId Cost ID, for internal reference NO string correlation.lang Document's language, must be one of nl, fr, en, de YES string correlation.returnAddress Return address in case of undeliverable mail NO string Symeta Hybrid, Interleuvenlaan 50, 3001 Leuven"},{"location":"intake_json/#postal-service-optional-default-bpost-non-prior","title":"Postal service (optional, default bpost non-prior)","text":"<p>Each Intake request may contain additional postal service instructions</p> Key Description Required Type Default postalService.registered Registered shipment with tracking (bpost) NO boolean 0 postalService.prior Prior shipment NO boolean 0 postalService.nonPrior Non-prior (standard) shipment NO boolean 1"},{"location":"intake_json/#hook-optional","title":"Hook (optional)","text":"<p>Each Intake request may specify a webhook URL and method to send status updates to</p> Key Description Required Type Default hook.uri URI where the webhook should be sent to YES, if webhook is desired string hook.method HTTP method to be used for the webhook, must be either GET or POST YES, if webhook is desired string <p>For more detailed information on the webhook functionality, refer to the Webhooks page.</p>"},{"location":"intake_json/#json-request-response","title":"JSON Request Response","text":""},{"location":"intake_json/#success","title":"Success","text":"Key Value HTTP status code 202 ACCEPTED JSON body <code>{ \"intake\": integer, \"cost\": integer }</code>"},{"location":"intake_json/#possible-error-codes","title":"Possible error codes","text":"HTTP code Description Reason 422 Unprocessable Entity Request is invalid - either missing or incorrectly formatted parameters 413 Entity Too Large Request size exceeds 4MB limit - use the Multipart method instead 401 Unauthorized Access token is not valid or expired - refer to the web portal"},{"location":"intake_multipart/","title":"Multipart Intake Request","text":""},{"location":"intake_multipart/#multipart-vs-json","title":"Multipart vs JSON","text":"<p>Using a Multipart Request allows to upload larger documents to the API. However, we do advise to use the JSON Intake Request as much as possible and avoid large filesizes. With the Multipart Request, the 4MB filesize limit does not apply. For the most part, the requests are very similar.</p>"},{"location":"intake_multipart/#endpoint-and-method","title":"Endpoint and method","text":"API version v1 Endpoint <code>base_url/api_version/intake/multipart</code> Method <code>POST</code>"},{"location":"intake_multipart/#request-header","title":"Request header","text":"Header Value Accept <code>application/json</code> Authorization <code>Bearer [token]</code>"},{"location":"intake_multipart/#multipart-form-data-structure","title":"Multipart form-data Structure","text":"<pre><code>document[name] =&gt; 'string',\ndocument[mime-type] =&gt; 'mime-type',\ndocument[contents] =&gt; file,\ndocument[multiplex] =&gt; boolean (default 1),\n\nattachments[0][name] =&gt; 'string',\nattachments[0][mime-type] =&gt; 'mime-type',\nattachments[0][contents] =&gt; file,\n\nattachments[1][name] =&gt; ...,\n\nbackground[name] =&gt; 'string',\nbackground[mime-type] =&gt; 'mime-type',\nbackground[contents] =&gt; file,\n\nenvelope[name] =&gt; 'string',\nenvelope[mime-type] =&gt; 'mime-type',\nenvelope[contents] =&gt; file,\n\naddress[firstname] =&gt; 'string',\naddress[lastname] =&gt; 'string',\naddress[fullname] =&gt; 'string',\naddress[street] =&gt; 'string',\naddress[houseNumber] =&gt; integer,\naddress[houseNumberAlpha] =&gt; 'string',\naddress[box] =&gt; 'string',\naddress[unstructuredStreetNumberBox] =&gt; 'string',\naddress[zip] =&gt; 'string',\naddress[municipality] =&gt; 'string',\naddress[countryIso2] =&gt; 'string max 2',\naddress[company] =&gt; 'string'\n\npostalService[registered] =&gt; boolean,\npostalService[prior] =&gt; boolean,\npostalService[nonPrior] =&gt; boolean,\n\ncorrelation[costId] =&gt; 'string,optional',\ncorrelation[lang] =&gt; 'required, nl,en or fr',\ncorrelation[returnAddress] =&gt; 'optional string, single line return address',\n\nrequestType =&gt; 'multipart'\n</code></pre>"},{"location":"intake_multipart/#multipart-form-data-values","title":"Multipart Form Data Values","text":""},{"location":"intake_multipart/#request-type-required","title":"Request type (required)","text":"<p>Warning</p> <p>This parameter cannot be omitted. It is mandatory for multipart intakes.</p> <p>Add parameter requestType and set value as 'multipart' to indicate it is a multipart form.</p> Key Description Required Type Default requestType Type of Intake request being sent YES string"},{"location":"intake_multipart/#document-required","title":"Document (required)","text":"<p>Each Multipart Intake request must contain exactly one main document.</p> Key Description Required Type Default document[name] Name of the original document, including extension YES string document[mime-type] MIME type of the document. Currently only \"application/pdf\" is accepted YES string document[contents] Document PDF file YES file/binary document[multiplex] Print setting of the document. 0 = recto, 1 = recto/verso NO boolean 1"},{"location":"intake_multipart/#attachments-optional","title":"Attachments (optional)","text":"<p>Each Multipart Intake request may contain multiple attachments, using a consecutive numerical index (see JSON structure).</p> Key Description Required Type Default attachments[n][name] Name of the attachment YES, if using attachment string attachments[n][mime-type] MIME type of the attachment. Currently only \"application/pdf\" is accepted YES string attachments[n][contents] Attachment PDF file YES file/binary attachments[n][multiplex] Print setting of the attachment. 0 = recto, 1 = recto/verso NO boolean 1"},{"location":"intake_multipart/#background-optional","title":"Background (optional)","text":"<p>Each Multipart Intake request may contain exactly 1 background. The background will only be printed on the first page  of the main document.</p> Key Description Required Type Default background[name] Name of the background YES, if using background string background[mime-type] MIME type of the background. Currently only \"application/pdf\" is accepted YES string background[contents] Background PDF file YES file/binary"},{"location":"intake_multipart/#envelope-optional","title":"Envelope (optional)","text":"<p>Each Multipart Intake request may contain exactly one envelope.</p> Key Description Required Type Default envelope[name] Name of the envelope YES, if using envelope string envelope[mime-type] MIME type of the envelope. Currently only \"application/pdf\" is accepted YES string envelope[contents] Envelope PDF file YES file/binary"},{"location":"intake_multipart/#carrier-optional-for-c4-envelopes","title":"Carrier (optional) for C4 envelopes","text":"<p>Each Multipart Intake request may contain exactly one carrier. An address carrier is only used when sending C4  envelopes, which use a separate sheet of paper to print the address on.</p> Key Description Required Type Default carrier[name] Name of the address carrier YES, if using carrier string carrier[mime-type] MIME type of the carrier. Currently only \"application/pdf\" is accepted YES string carrier[contents] Address carrier PDF file YES file/binary"},{"location":"intake_multipart/#address-required","title":"Address (required)","text":"<p>Each Multipart Intake request must contain exactly one recipient with the required address parts.</p> Key Description Required Type Default address[firstname] Recipient's first name YES, if address[fullname] and address[company] absent string address[lastname] Recipient's last name YES, if address[fullname] and address[company] absent string address[fullname] Recipient's full name YES, if address[firstname], address.lastname and address[company] absent string address[company] Company name YES, if address[firstname], address.lastname and address[fullname] absent string address[street] Street name without number YES, if address[unstructuredStreetNumberBox] absent string address[houseNumber] House number YES, if address[unstructuredStreetNumberBox] absent string address[houseNumberAlpha] House number alphanumeric, will be placed after houseNumber on envelope NO string address[box] Box number NO string address[unstructuredStreetNumberBox] Unstructured street, house number and box YES, if address[street] and address[houseNumber] absent string address[zip] Zip code YES string address[municipality] Municipality YES string address[countryIso2] Country code, ISO 3611-2 format (2 characters) YES string"},{"location":"intake_multipart/#correlation-required","title":"Correlation (required)","text":"Key Description Required Type Default correlation[costId] Cost ID, for internal reference NO string correlation[lang] Document's language, must be one of nl, fr, en, de YES string correlation[returnAddress] Return address in case of undeliverable mail NO string Symeta Hybrid, Interleuvenlaan 50, 3001 Leuven"},{"location":"intake_multipart/#postal-service-optional-default-bpost-non-prior","title":"Postal service (optional, default bpost non-prior)","text":"<p>Each Intake request may contain additional postal service instructions</p> Key Description Required Type Default postalService[registered] Registered shipment with tracking (bpost) NO boolean 0 postalService[prior] Prior shipment NO boolean 0 postalService[nonPrior] Non-prior (standard) shipment NO boolean 1"},{"location":"intake_multipart/#hook-optional","title":"Hook (optional)","text":"<p>Each Intake request may specify a webhook URL and method to send status updates to</p> Key Description Required Type Default hook[uri] URI where the webhook should be sent to YES, if webhook is desired string hook[method] HTTP method to be used for the webhook, must be either GET or POST YES, if webhook is desired string <p>For more detailed information on the webhook functionality, refer to the Webhooks page.</p>"},{"location":"intake_multipart/#multipart-intake-request-response","title":"Multipart Intake Request Response","text":""},{"location":"intake_multipart/#success","title":"Success","text":"Key Value HTTP status code 202 ACCEPTED JSON body <code>{ \"intake\": integer, \"cost\": integer }</code>"},{"location":"intake_multipart/#possible-error-codes","title":"Possible error codes","text":"HTTP code Description Reason 422 Unprocessable Entity Request is invalid - either missing or incorrectly formatted parameters 413 Entity Too Large Request size exceeds limit 401 Unauthorized Access token is not valid or expired - refer to the web portal"},{"location":"intake_preview/","title":"Intake preview request","text":""},{"location":"intake_preview/#endpoint-and-method","title":"Endpoint and method","text":"API version v1 Endpoint <code>base_url/api_version/intake/preview/{id}</code> Method <code>GET</code>"},{"location":"intake_preview/#request-header","title":"Request header","text":"Header Value Accept <code>application/json</code> Authorization <code>Bearer [token]</code>"},{"location":"intake_preview/#json-response","title":"JSON response","text":"<p>The API will return a JSON response containing the following properties, where <code>previewBase64</code> contains the final  composed PDF file's contents, in a base-64 encoded format. <pre><code>{\n    \"attachmentPages\": 6,\n    \"documentPages\": 6,\n    \"previewBase64\": \"{base64 encoded string}\",\n    \"totalPages\": \"18\"\n}\n</code></pre></p>"},{"location":"pods/","title":"Proof of Delivery","text":""},{"location":"pods/#introduction","title":"Introduction","text":"<p>For registered mail, we have implemented bpost's Proof of Delivery (POD) API. This allows you to track your registered mail, and optionally download the POD PDF document.</p>"},{"location":"pods/#endpoint-and-method","title":"Endpoint and method","text":"<p>There are 2 endpoints available for the POD's: retrieving POD information and downloading the POD document (if available).</p>"},{"location":"pods/#request-pod-information","title":"Request POD information","text":"API version v1 Endpoint <code>base_url/api_version/proof-of-delivery/{id}</code> Method <code>GET</code>"},{"location":"pods/#response","title":"Response","text":"<pre><code>{\n    \"podGuid\": \"string\",\n    \"podBusinessKey\": \"miw2_\",\n    \"requestDateTime\": \"2024-03-20T14:00:00+00:00\",\n    \"barcode\": \"JJBEA000000000000012345\",\n    \"deliveryStates\": [\n        {\n            \"stateCode\": \"PodDownloadRequestPodInfoSucceeded\",\n            \"stateDisplaytext\": \"Pod download request, pod info succeeded\",\n            \"transitionDateTime\": \"2023-08-01T10:00:00+02:00\"\n        }\n    ],\n    \"documentInfo\": {\n        \"hasPodAvailable\": true,\n        \"hasOriginalDocumentAvailable\": true\n    }\n}\n</code></pre>"},{"location":"pods/#download-pod-document","title":"Download POD document","text":"<p>Attention</p> <p>This will only work if the <code>hasPodAvailable</code> parameter from the information request is <code>true</code>.</p> API version v1 Endpoint <code>base_url/api_version/proof-of-delivery/{id}/document</code> Method <code>POST</code>"},{"location":"pods/#response_1","title":"Response","text":"<p>The POD document will be returned as <code>binary</code>, with an <code>application/pdf</code> header.</p>"},{"location":"resource_request/","title":"JSON Resource Requests","text":""},{"location":"resource_request/#general","title":"General","text":"<p>A resource request returns a data collection, formatted as JSON.</p>"},{"location":"resource_request/#resource-request-header","title":"Resource Request Header","text":"Header Value Accept <code>application/json</code> Authorization Bearer [token]"},{"location":"resource_request/#available-resource-collections","title":"Available Resource Collections","text":""},{"location":"resource_request/#intake-resource","title":"Intake Resource","text":"<p>With the Intake ID received when submitting an Intake, you can retrieve all information related to that Intake.</p> <ul> <li>Endpoint: BASE_URI/intake/show/{intake_id}</li> <li>Method: GET</li> <li>Example: https://api.mailitwize.be/intake/show/678</li> </ul> <pre><code>{\n    \"data\": {\n        \"id\": 78754,\n        \"firstname\": \"John\",\n        \"lastname\": \"Doe\",\n        \"fullname\": null,\n        \"company\": null,\n        \"street\": \"Fernand Scribedreef\",\n        \"number\": \"1\",\n        \"number_alpha\": null,\n        \"box\": null,\n        \"unstructured_street\": \"\",\n        \"zip\": \"9000\",\n        \"municipality\": \"Gent\",\n        \"country_iso2\": \"BE\",\n        \"cost_id\": null,\n        \"status\": \"Printing\",\n        \"created_at\": \"2022-12-08T13:16:15.827000Z\",\n        \"updated_at\": \"2022-12-08T13:18:05.407000Z\",\n        \"mailpack\": {\n            \"id\": 88715,\n            \"intake_id\": \"78754\",\n            \"name\": \"miw2_78754_231ec460-b7bd-4da4-9bd5-ed54bc08cff0_mailpack.pdf\",\n            \"pages\": \"2\",\n            \"envelope_type\": \"US\",\n            \"created_at\": \"2022-12-08T13:17:08.150000Z\",\n            \"updated_at\": \"2022-12-08T13:17:08.150000Z\"\n        },\n        \"envelope\": {\n            \"id\": 17147,\n            \"intake_id\": \"78754\",\n            \"name\": \"miw2_78754_231ec460-b7bd-4da4-9bd5-ed54bc08cff0_envelope.pdf\",\n            \"original_name\": \"miw2_78754_231ec460-b7bd-4da4-9bd5-ed54bc08cff0_envelope.pdf\",\n            \"created_at\": \"2022-12-08T13:16:15.857000Z\",\n            \"updated_at\": \"2022-12-08T13:16:15.857000Z\"\n        },\n        \"shipping_barcode\": false,\n        \"shipping_date\": false\n    }\n}\n</code></pre>"},{"location":"webhooks/","title":"Webhooks","text":""},{"location":"webhooks/#introduction","title":"Introduction","text":"<p>Once an Intake has been accepted by the API, it will receive status updates via webhooks.</p> <p>Currently, there are 4 possible status updates:</p> <ul> <li>Processed (Intake received successfully, currently being processed by our server)</li> <li>Printing (Intake processed and put on the print queue)</li> <li>Shipped (Intake printed and delivered to bpost for mail delivery)</li> <li>Returned (Postal item was returned to Symeta Hybrid)</li> </ul> <p>These webhooks will be sent to the URI you specify in the Intake, as well as using the specified method (hook.uri and hook.method).</p> <p>To make use of webhooks, you will need to generate a webhook key in the API interface first. This key can then be used to verify the contents of the webhook's payload as follows.</p> <p>Calculate the SHA-256 hash of the JSON payload, using the webhook key as key. If this hash matches the hash that is sent in the header value, the payload is valid.</p> <p>For example, in PHP: <pre><code>&lt;?php\n$hash = hash_hmac('sha256', $jsonPayload, $webhookKey);\nif ($hash === $responseHeader) {\n    // Payload contents verified\n    // ...\n}\n</code></pre></p>"},{"location":"webhooks/#structure","title":"Structure","text":"<p>Each webhook will be sent as an <code>application/json</code> payload.</p> <p>The webhook payload will contain a JSON body with the following keys and header:</p> Header Value Signature SHA-256 hash <p>The payloads are as follows, for each status:</p>"},{"location":"webhooks/#processed","title":"Processed","text":"<pre><code>{\n    \"intake\": 158056,\n    \"status\": \"Processed\",\n    \"data\": \"\"\n}\n</code></pre>"},{"location":"webhooks/#printing","title":"Printing","text":"<pre><code>{\n    \"intake\": 158056,\n    \"status\": \"Printing\"\n}\n</code></pre>"},{"location":"webhooks/#shipped","title":"Shipped","text":"<pre><code>{\n    \"intake\": 158056,\n    \"status\": \"Shipped\",\n    \"data\": {\n        \"bpost\": \"JJBEA000000000000012345\", \n        \"shipping_date\": \"15-03-2024\"\n    },\n    \"type\": \"status_update\"\n}\n</code></pre>"},{"location":"webhooks/#returned","title":"Returned","text":"<pre><code>{\n    \"intake\": 158056,\n    \"status\": \"Returned\",\n    \"data\": {\n        \"barcode\": \"JJBEA000000000000012345\",\n        \"reasonCode\": \"S11\",\n        \"reasonDescription\": \"Ontvangt de briefwisseling niet op aangeduid adres\",\n        \"scanned_at\": \"2024-03-17 12:00:00\"\n    },\n    \"type\": \"status_update\"\n}\n</code></pre>"}]}